# python -m torch.distributed.run --nproc_per_node=1 --master_port=25676 train.py --cfg-path lavis/projects/instructblip/train/epic-kitchens/finetune_instructblip_epic_kitchens_overfit.yaml 
_BASE_: ../vqa_finetune.yaml
datasets:
  epic_kitchens:
    build_info:
      kwargs:
        all:
          # qa_prompt:
          # - describe_predicates
          # - action_before_after
          # - action_complete
          prompt_kw:
            random_prompt_mix: False
          filter_verbs:
          - open
          - closeu
          shuffle: False
        train: 
          downsample_count: 128
          fake_duplicate_count: 4
          h5_file: /scratch/bs3639/EKOS_train.h5
        val: 
          downsample_count: 128
          h5_file: /scratch/bs3639/EKOS_train.h5
        test:
          downsample_count: 128
          h5_file: /scratch/bs3639/EKOS_train.h5
      annotations:
        train:
          storage: /scratch/bs3639/ego2023/epic-kitchens-100-annotations/EPIC_100_train.csv
        val:
          storage: /scratch/bs3639/ego2023/epic-kitchens-100-annotations/EPIC_100_train.csv
        test:
          storage: /scratch/bs3639/ego2023/epic-kitchens-100-annotations/EPIC_100_train.csv

run:
  output_dir: "output/results/epic_kitchens/epic_kitchens_overfit"
  test_splits: ['val']
  # resume_ckpt_path: lavis/output/results/epic_kitchens/epic_kitchens_pretrain/20240513160/checkpoint_best.pth

tags:
 - overfit