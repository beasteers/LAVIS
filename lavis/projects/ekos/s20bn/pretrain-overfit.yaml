# python -m torch.distributed.run --nproc_per_node=1 --master_port=25676 train.py --cfg-path lavis/projects/instructblip/train/epic-kitchens/finetune_instructblip_s20bn_overfit.yaml 
_BASE_: pretrain.yaml
datasets:
  s20bn:
    build_info:
      kwargs:
        all:
          qa_prompt:
          - describe_predicates
          # - action_before_after
          # - action_complete
          prompt_kw:
            random_prompt_mix: False
          filter_verbs:
          - open
          - close
          shuffle: False
        train: 
          downsample_count: 128
          fake_duplicate_count: 8
        val: 
          downsample_count: 128
        test:
          downsample_count: 128
      annotations:
        train:
          storage: /scratch/work/ptg/Something_ek_labels/s20bn_train.csv
        val:
          storage: /scratch/work/ptg/Something_ek_labels/s20bn_train.csv
        test:
          storage: /scratch/work/ptg/Something_ek_labels/s20bn_train.csv
run:
  output_dir: "output/results/s20bn/s20bn_overfit"
  max_epoch: 10
  # init_lr: 1e-3
  # weight_decay: 0.01
  # num_workers: 0
  # evaluate: True
  # eval_ckpt_path: output/results/s20bn/s20bn_overfit/20240409173/checkpoint_best.pth
  test_splits: ['val']

tags:
 - overfit
 - qf